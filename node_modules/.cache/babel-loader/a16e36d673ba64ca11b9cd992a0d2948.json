{"ast":null,"code":"const BASEAPI = 'http://127.0.0.1:8000';\n\nconst apiPost = async (endpoint, body) => {\n  const response = await fetch(BASEAPI + endpoint, {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(body)\n  });\n  const json = await response.json();\n\n  if (json.notallowed) {\n    window.location.href = \"/\";\n    return;\n  }\n\n  return json;\n};\n\nconst API = {\n  login: async (email, password) => {\n    const json = await apiPost('/auth/login', {\n      email,\n      password\n    });\n    return json;\n  },\n  register: async (name, email, password) => {\n    const json = await apiPost('/barbers', {\n      name,\n      email,\n      password\n    });\n    return json;\n  },\n  signUp: async (name, email, password) => {\n    const req = await fetch(`${BASE_API}/user`, {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name,\n        email,\n        password\n      })\n    });\n    const json = await req.json();\n    return json;\n  }\n};\nexport default (() => API);","map":{"version":3,"sources":["/home/bruno/Desktop/projetos/painelweb/src/services/api.js"],"names":["BASEAPI","apiPost","endpoint","body","response","fetch","method","headers","JSON","stringify","json","notallowed","window","location","href","API","login","email","password","register","name","signUp","req","BASE_API","Accept"],"mappings":"AAAA,MAAMA,OAAO,GAAG,uBAAhB;;AAEA,MAAMC,OAAO,GAAG,OAAOC,QAAP,EAAiBC,IAAjB,KAA0B;AACtC,QAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACL,OAAO,GAACE,QAAT,EAAmB;AAC3CI,IAAAA,MAAM,EAAE,MADmC;AAE3CC,IAAAA,OAAO,EAAC;AACJ,gBAAU,kBADN;AAEJ,sBAAgB;AAFZ,KAFmC;AAM3CJ,IAAAA,IAAI,EAACK,IAAI,CAACC,SAAL,CAAeN,IAAf;AANsC,GAAnB,CAA5B;AAQA,QAAMO,IAAI,GAAG,MAAMN,QAAQ,CAACM,IAAT,EAAnB;;AAEA,MAAGA,IAAI,CAACC,UAAR,EAAoB;AAChBC,IAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;AACA;AACH;;AACD,SAAOJ,IAAP;AACH,CAhBD;;AAmBA,MAAMK,GAAG,GAAG;AAERC,EAAAA,KAAK,EAAC,OAAOC,KAAP,EAAcC,QAAd,KAA2B;AAC7B,UAAMR,IAAI,GAAG,MAAMT,OAAO,CACtB,aADsB,EAEtB;AAACgB,MAAAA,KAAD;AAAQC,MAAAA;AAAR,KAFsB,CAA1B;AAIA,WAAOR,IAAP;AACH,GARO;AAURS,EAAAA,QAAQ,EAAC,OAAOC,IAAP,EAAaH,KAAb,EAAoBC,QAApB,KAAiC;AACtC,UAAMR,IAAI,GAAG,MAAMT,OAAO,CACtB,UADsB,EAEtB;AAACmB,MAAAA,IAAD;AAAOH,MAAAA,KAAP;AAAcC,MAAAA;AAAd,KAFsB,CAA1B;AAIA,WAAOR,IAAP;AACH,GAhBO;AAkBRW,EAAAA,MAAM,EAAE,OAAOD,IAAP,EAAaH,KAAb,EAAoBC,QAApB,KAAiC;AACrC,UAAMI,GAAG,GAAG,MAAMjB,KAAK,CAAE,GAAEkB,QAAS,OAAb,EAAqB;AACxCjB,MAAAA,MAAM,EAAE,MADgC;AAExCC,MAAAA,OAAO,EAAE;AACLiB,QAAAA,MAAM,EAAE,kBADH;AAEL,wBAAgB;AAFX,OAF+B;AAMxCrB,MAAAA,IAAI,EAAEK,IAAI,CAACC,SAAL,CAAe;AAACW,QAAAA,IAAD;AAAOH,QAAAA,KAAP;AAAcC,QAAAA;AAAd,OAAf;AANkC,KAArB,CAAvB;AAQA,UAAMR,IAAI,GAAG,MAAMY,GAAG,CAACZ,IAAJ,EAAnB;AACA,WAAOA,IAAP;AACH;AA7BO,CAAZ;AAkCA,gBAAe,MAAIK,GAAnB","sourcesContent":["const BASEAPI = 'http://127.0.0.1:8000';\n\nconst apiPost = async (endpoint, body) => {\n    const response = await fetch(BASEAPI+endpoint, {\n        method: 'POST',\n        headers:{\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body:JSON.stringify(body)\n    });\n    const json = await response.json();\n    \n    if(json.notallowed) {\n        window.location.href = \"/\";\n        return;\n    }\n    return json;\n}\n\n\nconst API = {\n\n    login:async (email, password) => {\n        const json = await apiPost(\n            '/auth/login',\n            {email, password}\n        );\n        return json;\n    },\n    \n    register:async (name, email, password) => {\n        const json = await apiPost(\n            '/barbers',\n            {name, email, password}\n        );\n        return json;\n    },\n\n    signUp: async (name, email, password) => {\n        const req = await fetch(`${BASE_API}/user`, {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({name, email, password})\n        });\n        const json = await req.json();        \n        return json;\n    }\n    \n};\n\n\nexport default ()=>API;"]},"metadata":{},"sourceType":"module"}